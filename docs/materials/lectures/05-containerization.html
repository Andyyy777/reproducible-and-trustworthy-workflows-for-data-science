
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Managing dependencies using containerization &#8212; DSCI 310 Reproducible and Trustworthy Workflows for Data Science</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Virtual environments" href="04-virtual-environments.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/dsci-310-logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">DSCI 310 Reproducible and Trustworthy Workflows for Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../README.html">
   Reproducible and Trustworthy Workflows for Data Science
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course notes
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="03-filenames-project-organization.html">
   Filenames and data science project organization, Integrated development environments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04-virtual-environments.html">
   Virtual environments
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Managing dependencies using containerization
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/materials/lectures/05-containerization.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/issues/new?title=Issue%20on%20page%20%2Fmaterials/lectures/05-containerization.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/UBC-DSCI/reproducible-and-trustworthy-workflows-for-data-science/master?urlpath=tree/materials/lectures/05-containerization.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#topic-learning-objectives">
   Topic learning objectives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction-to-containerization">
   Introduction to containerization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#documenting-and-loading-dependencies">
     Documenting and loading dependencies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-a-container">
     What is a container?
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exercise-running-a-simple-container">
       Exercise - running a simple container
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exercise-running-a-container-with-a-web-app">
       Exercise - running a container with a web app
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contrasting-containers-with-virtual-machines">
   Contrasting containers with virtual machines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contrasting-common-computational-environment-virtualization-strategies">
   Contrasting common computational environment virtualization strategies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#virtualization-strategy-advantages-and-disadvantages-for-reproducibility">
   Virtualization strategy advantages and disadvantages for reproducibility
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#virtual-environment">
     Virtual environment
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#advantages">
       Advantages
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#disadvantages">
       Disadvantages
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#containers">
     Containers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Advantages
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Disadvantages
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#virtual-machine">
     Virtual machine
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       Advantages
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Disadvantages
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#container-useage-workflow">
   Container useage workflow
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#image-vs-container">
   Image vs container?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-a-container-registry">
   What is a container registry
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#demonstration">
     Demonstration
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-we-specify-a-container-image">
   How do we specify a container image?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#demonstration-of-container-images-being-built-from-layers">
     Demonstration of container images being built from layers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-containers">
   Running containers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-launch-the-docker-app-for-osx-windows-only">
     Step 1 - launch the Docker app (for OSX &amp; Windows only)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-get-container-image-from-dockerhub">
     Step 2 - get container image from Dockerhub
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-launch-a-container-from-the-image-and-poke-around">
     Step 3 - launch a container from the image and poke around!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-clean-up-your-container">
     Step 4 - clean up your container!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#that-s-a-lot-of-work">
     That’s a lot of work…
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mounting-volumes-to-containers">
   Mounting volumes to containers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#windows-notes-for-mounting-volumes">
     Windows notes for mounting volumes:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docker-commands">
   Docker commands
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#where-to-next">
   Where to next?
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Managing dependencies using containerization</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#topic-learning-objectives">
   Topic learning objectives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction-to-containerization">
   Introduction to containerization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#documenting-and-loading-dependencies">
     Documenting and loading dependencies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-a-container">
     What is a container?
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exercise-running-a-simple-container">
       Exercise - running a simple container
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exercise-running-a-container-with-a-web-app">
       Exercise - running a container with a web app
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contrasting-containers-with-virtual-machines">
   Contrasting containers with virtual machines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contrasting-common-computational-environment-virtualization-strategies">
   Contrasting common computational environment virtualization strategies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#virtualization-strategy-advantages-and-disadvantages-for-reproducibility">
   Virtualization strategy advantages and disadvantages for reproducibility
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#virtual-environment">
     Virtual environment
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#advantages">
       Advantages
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#disadvantages">
       Disadvantages
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#containers">
     Containers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Advantages
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Disadvantages
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#virtual-machine">
     Virtual machine
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       Advantages
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Disadvantages
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#container-useage-workflow">
   Container useage workflow
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#image-vs-container">
   Image vs container?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-a-container-registry">
   What is a container registry
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#demonstration">
     Demonstration
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-we-specify-a-container-image">
   How do we specify a container image?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#demonstration-of-container-images-being-built-from-layers">
     Demonstration of container images being built from layers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-containers">
   Running containers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-launch-the-docker-app-for-osx-windows-only">
     Step 1 - launch the Docker app (for OSX &amp; Windows only)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-get-container-image-from-dockerhub">
     Step 2 - get container image from Dockerhub
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-launch-a-container-from-the-image-and-poke-around">
     Step 3 - launch a container from the image and poke around!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-clean-up-your-container">
     Step 4 - clean up your container!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#that-s-a-lot-of-work">
     That’s a lot of work…
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mounting-volumes-to-containers">
   Mounting volumes to containers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#windows-notes-for-mounting-volumes">
     Windows notes for mounting volumes:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docker-commands">
   Docker commands
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#where-to-next">
   Where to next?
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="managing-dependencies-using-containerization">
<h1>Managing dependencies using containerization<a class="headerlink" href="#managing-dependencies-using-containerization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="topic-learning-objectives">
<h2>Topic learning objectives<a class="headerlink" href="#topic-learning-objectives" title="Permalink to this headline">¶</a></h2>
<p>By the end of this topic, students should be able to:</p>
<ol class="simple">
<li><p>Explain what containers are, and why they can be useful for reproducible data
analyses</p></li>
<li><p>Discuss the advantages and limitations of containerization (e.g., Docker) in the
context of reproducible data analyses</p></li>
<li><p>Compare and contrast the difference between running software/scripts in a virtual
environment, a virtual machine and a container</p></li>
<li><p>Evaluate, choose and justify an appropriate environment management solution based
on the data analysis project’s complexity, expected usage and longevity.</p></li>
<li><p>Use a containerization software (e.g., Docker) to run the software needed for your
analysis</p></li>
<li><p>Write a container file (e.g., Dockerfile) that can be used to reproducibly build a
container image that would contain the needed software and environment
dependencies of your Data Science project</p></li>
<li><p>Use manual and automated tools (e.g., Docker, GitHub Actions) to build and share
container images</p></li>
<li><p>List good container base images for Data Science projects</p></li>
</ol>
</div>
<div class="section" id="introduction-to-containerization">
<h2>Introduction to containerization<a class="headerlink" href="#introduction-to-containerization" title="Permalink to this headline">¶</a></h2>
<div class="section" id="documenting-and-loading-dependencies">
<h3>Documenting and loading dependencies<a class="headerlink" href="#documenting-and-loading-dependencies" title="Permalink to this headline">¶</a></h3>
<p>You’ve made some beautiful data analysis pipeline/project using make, R, and/or Python. It runs on your machine, but how easily can you, or someone else, get it working on theirs? The answer usually is, it depends…</p>
<p>What does it depend on?</p>
<ol class="simple">
<li><p>Does your <code class="docutils literal notranslate"><span class="pre">README</span></code> and your scripts make it blatantly obvious what programming languages and packages need to run your data analysis pipeline/project?</p></li>
</ol>
<ol class="simple">
<li><p>Do you also document the version numbers of the programming languages and packages you used? This can have big consequences when it comes to reproducibility… (<em>e.g.</em>,the <a class="reference external" href="https://blog.revolutionanalytics.com/2019/05/whats-new-in-r-360.html">change to random number generation</a> in R in 2019?)</p></li>
<li><p>Did you document what other software (beyond the the programming languages and packages used) and operating system dependencies are needed to run your data analysis pipeline/project?</p></li>
</ol>
<p><em>Virtual environments can be tremendously helpful with #1 &amp; #2, however, they may or may not be helpful to manage #3…</em> <strong><em>Enter containerization as a possible solution!</em></strong></p>
</div>
<div class="section" id="what-is-a-container">
<h3>What is a container?<a class="headerlink" href="#what-is-a-container" title="Permalink to this headline">¶</a></h3>
<p>Containers are another way to generate (and share!) isolated computational environments. They differ from virtual environments (which we discussed previously) in that they are even more isolated from the computers operating system, as well as they can be used share many other types of software, applications and operating system dependencies.</p>
<p>Before we can fully define containers, however, we need to define <strong>virtualization</strong>. Virtualization is a process that allows us to divide the the elements of a single computer into several virtual elements. These elements can include computer hardware platforms, storage devices, and computer network resources, and even operating system user spaces (e.g., graphical tools, utilities, and programming languages).</p>
<p>Containers virtualize operating system user spaces so that they can isolate the processes they contain, as well as control the processes’ access to computer resources (e.g., CPUs, memory and desk space). What this means in practice, is that an operating system user space can be carved up into multiple containers running the same, or different processes, in isolation. Below we show the schematic of a container whose virtual user space contains the:</p>
<ul class="simple">
<li><p>R programming language, the Bioconductor package manager, and two Bioconductor packages</p></li>
<li><p>Galaxy workflow software and two toolboxes that can be used with it</p></li>
<li><p>Python programming language, iPython interpreter and Jupyter notebook package</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/13742_2016_article_135_f7.jpeg"><img alt="../../_images/13742_2016_article_135_f7.jpeg" src="../../_images/13742_2016_article_135_f7.jpeg" style="width: 250px;" /></a>
<p><strong>Schematic of a container for genomics research.</strong> Source: <a class="reference external" href="https://doi.org/10.1186/s13742-016-0135-4">https://doi.org/10.1186/s13742-016-0135-4</a></p>
<div class="section" id="exercise-running-a-simple-container">
<h4>Exercise - running a simple container<a class="headerlink" href="#exercise-running-a-simple-container" title="Permalink to this headline">¶</a></h4>
<p>To further illustrate what a container looks like, and feels like, we can use Docker (containerization software) to run one and explore. First we will run an linux (debian-flavoured) container that has R installed. To run this type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">it</span> <span class="n">rocker</span><span class="o">/</span><span class="n">r</span><span class="o">-</span><span class="n">base</span><span class="p">:</span><span class="mf">3.6.3</span>
</pre></div>
</div>
<p>When you successfully launch the container, R should have started. Check the version of R - is it the same as your computer’s version of R? Use <code class="docutils literal notranslate"><span class="pre">getwd()</span></code> and <code class="docutils literal notranslate"><span class="pre">list.files()</span></code> to explore the containers filesystem from R. Does this look like your computer’s filesystem or something else?</p>
</div>
<div class="section" id="exercise-running-a-container-with-a-web-app">
<h4>Exercise - running a container with a web app<a class="headerlink" href="#exercise-running-a-container-with-a-web-app" title="Permalink to this headline">¶</a></h4>
<p>Next, try to use Docker to run a container that contains the RStudio server web-application installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8787</span><span class="p">:</span><span class="mi">8787</span> <span class="o">-</span><span class="n">e</span> <span class="n">PASSWORD</span><span class="o">=</span><span class="s2">&quot;apassword&quot;</span> <span class="n">rocker</span><span class="o">/</span><span class="n">rstudio</span><span class="p">:</span><span class="mf">4.1.2</span>
</pre></div>
</div>
<p>Then visit a web browser on your computer and type: <a class="reference external" href="http://localhost:8787">http://localhost:8787</a></p>
<p>If it worked, then you should be at an RStudio Sign In page. To sign in, use the following credentials:</p>
<ul class="simple">
<li><p><strong>username:</strong> rstudio</p></li>
<li><p><strong>password:</strong> apassword</p></li>
</ul>
<p>The RStudio server web app being run by the container should look something like this:</p>
<a class="reference internal image-reference" href="../../_images/rstudio-container-web-app.png"><img alt="../../_images/rstudio-container-web-app.png" src="../../_images/rstudio-container-web-app.png" style="width: 600px;" /></a>
</div>
</div>
</div>
<div class="section" id="contrasting-containers-with-virtual-machines">
<h2>Contrasting containers with virtual machines<a class="headerlink" href="#contrasting-containers-with-virtual-machines" title="Permalink to this headline">¶</a></h2>
<p>Virtual machines are another technology that can be used to generate (and share) isolated computational environments. Virtual machines emulate the functionality an entire computer on a another physical computer. With virtual machine the virtualization occurs at the layer of software that sits between the computer’s hardware and the operating system(s). This software is called a hypervisor. For example, on a Mac laptop, you could install a program called <a class="reference external" href="https://www.virtualbox.org/">Oracle Virtual Box</a> to run a virtual machine whose operating system was Windows 10, as the screen shot below shows:</p>
<img alt="https://www.virtualbox.org/raw-attachment/wiki/Screenshots/Windows_8.1_on_OSX.png" src="https://www.virtualbox.org/raw-attachment/wiki/Screenshots/Windows_8.1_on_OSX.png" />
<p><strong>A screenshot of a Mac OS computer running a Windows virtual machine.</strong> Source: <a class="reference external" href="https://www.virtualbox.org/wiki/Screenshots">https://www.virtualbox.org/wiki/Screenshots</a></p>
<p>Below, we share an illustration that compares where virtualization happens in containers compared to virtual machines. This difference, leads to containers being more light-weight and portable compared to virtual machines, and also less isolated.</p>
<a class="reference internal image-reference" href="../../_images/container_v_vm.png"><img alt="../../_images/container_v_vm.png" src="../../_images/container_v_vm.png" style="width: 600px;" /></a>
<p><em>Source: https://www.docker.com/resources/what-container</em></p>
<p><strong>Key take home:</strong> - Containerization software shares the host’s operating system, whereas virtual machines have a completely separate, additional operating system. This can make containers lighter (smaller in terms of size) and more resource and time-efficient than using a virtual machine.*</p>
</div>
<div class="section" id="contrasting-common-computational-environment-virtualization-strategies">
<h2>Contrasting common computational environment virtualization strategies<a class="headerlink" href="#contrasting-common-computational-environment-virtualization-strategies" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Virtual environment</p></th>
<th class="head"><p>Container</p></th>
<th class="head"><p>Virtual machine</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Virtualization level</p></td>
<td><p>Application</p></td>
<td><p>Operating system user-space</p></td>
<td><p>Hardware</p></td>
</tr>
<tr class="row-odd"><td><p>Isolation</p></td>
<td><p>Programming languages, packages</p></td>
<td><p>Programming languages, packages, <strong>other software, operating system dependencies, filesystems, networks</strong></p></td>
<td><p>Programming languages, packages, other software, operating system dependencies, filesystems, networks, <strong>operating systems</strong></p></td>
</tr>
<tr class="row-even"><td><p>Size</p></td>
<td><p>Extremely light-weight</p></td>
<td><p>light-weight</p></td>
<td><p>heavy-weight</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="virtualization-strategy-advantages-and-disadvantages-for-reproducibility">
<h2>Virtualization strategy advantages and disadvantages for reproducibility<a class="headerlink" href="#virtualization-strategy-advantages-and-disadvantages-for-reproducibility" title="Permalink to this headline">¶</a></h2>
<p>Let’s collaboratively generate a list of advantages and disadvantages of each virtualization strategy in the context of reproducibility:</p>
<div class="section" id="virtual-environment">
<h3>Virtual environment<a class="headerlink" href="#virtual-environment" title="Permalink to this headline">¶</a></h3>
<div class="section" id="advantages">
<h4>Advantages<a class="headerlink" href="#advantages" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li></li>
<li></li>
</ul>
</div>
<div class="section" id="disadvantages">
<h4>Disadvantages<a class="headerlink" href="#disadvantages" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li></li>
<li></li>
</ul>
</div>
</div>
<div class="section" id="containers">
<h3>Containers<a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>Advantages<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li></li>
<li></li>
</ul>
</div>
<div class="section" id="id2">
<h4>Disadvantages<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li></li>
<li></li>
</ul>
</div>
</div>
<div class="section" id="virtual-machine">
<h3>Virtual machine<a class="headerlink" href="#virtual-machine" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id3">
<h4>Advantages<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li></li>
<li></li>
</ul>
</div>
<div class="section" id="id4">
<h4>Disadvantages<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li></li>
<li></li>
</ul>
</div>
</div>
</div>
<div class="section" id="container-useage-workflow">
<h2>Container useage workflow<a class="headerlink" href="#container-useage-workflow" title="Permalink to this headline">¶</a></h2>
<p>A schematic of Container useage workflow from a <a class="reference external" href="https://blog.octo.com/en/docker-registry-first-steps/">blog post</a> by Arnaud Mazin:</p>
<p><img alt="Containers_vs_images" src="../../_images/docker-stages.png" />
<em>Source: <a class="reference external" href="https://blog.octo.com/en/docker-registry-first-steps/">OctoTalks</a></em></p>
</div>
<div class="section" id="image-vs-container">
<h2>Image vs container?<a class="headerlink" href="#image-vs-container" title="Permalink to this headline">¶</a></h2>
<p>Analogy: The program Chrome is like a Docker image, whereas a Chrome window is like a Docker container.</p>
<a class="reference internal image-reference" href="../../_images/instance_analogy.png"><img alt="../../_images/instance_analogy.png" class="align-left" src="../../_images/instance_analogy.png" style="width: 600px;" /></a>
<p>You can list the container <strong>images</strong> on your computer that you pulled using Docker via: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">images</span></code>. You should see a list like this when you do this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REPOSITORY</span>                 <span class="n">TAG</span>       <span class="n">IMAGE</span> <span class="n">ID</span>       <span class="n">CREATED</span>         <span class="n">SIZE</span>
<span class="n">rocker</span><span class="o">/</span><span class="n">rstudio</span>             <span class="mf">4.1.2</span>     <span class="n">ff47c56c9c0b</span>   <span class="mi">8</span> <span class="n">days</span> <span class="n">ago</span>      <span class="mf">1.89</span><span class="n">GB</span>
<span class="n">continuumio</span><span class="o">/</span><span class="n">miniconda3</span>     <span class="n">latest</span>    <span class="mi">4</span><span class="n">d529c886124</span>   <span class="mi">4</span> <span class="n">weeks</span> <span class="n">ago</span>     <span class="mi">399</span><span class="n">MB</span>
<span class="n">jupyter</span><span class="o">/</span><span class="n">base</span><span class="o">-</span><span class="n">notebook</span>      <span class="n">latest</span>    <span class="mi">8610</span><span class="n">b7acbd67</span>   <span class="mi">5</span> <span class="n">weeks</span> <span class="n">ago</span>     <span class="mi">683</span><span class="n">MB</span>
<span class="n">jupyter</span><span class="o">/</span><span class="n">minimal</span><span class="o">-</span><span class="n">notebook</span>   <span class="n">latest</span>    <span class="mi">4801</span><span class="n">dcfde35b</span>   <span class="mi">2</span> <span class="n">months</span> <span class="n">ago</span>    <span class="mf">1.38</span><span class="n">GB</span>
<span class="n">rocker</span><span class="o">/</span><span class="n">r</span><span class="o">-</span><span class="n">base</span>              <span class="n">latest</span>    <span class="mi">91</span><span class="n">af7f4c94cd</span>   <span class="mi">3</span> <span class="n">months</span> <span class="n">ago</span>    <span class="mi">814</span><span class="n">MB</span>
<span class="n">ubuntu</span>                     <span class="n">focal</span>     <span class="n">ba6acccedd29</span>   <span class="mi">3</span> <span class="n">months</span> <span class="n">ago</span>    <span class="mf">72.8</span><span class="n">MB</span>
<span class="n">rocker</span><span class="o">/</span><span class="n">r</span><span class="o">-</span><span class="n">base</span>              <span class="mf">3.6.3</span>     <span class="n">ddcf1852524d</span>   <span class="mi">23</span> <span class="n">months</span> <span class="n">ago</span>   <span class="mi">679</span><span class="n">MB</span>
</pre></div>
</div>
<p>You can list the states of containers that have been started by Docker on your computer (and not yet removed) via: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                  <span class="n">COMMAND</span>   <span class="n">CREATED</span>          <span class="n">STATUS</span>          <span class="n">PORTS</span>                                       <span class="n">NAMES</span>
<span class="mi">9160100</span><span class="n">c7d4b</span>   <span class="n">rocker</span><span class="o">/</span><span class="n">r</span><span class="o">-</span><span class="n">base</span><span class="p">:</span><span class="mf">3.6.3</span>    <span class="s2">&quot;R&quot;</span>       <span class="mi">5</span> <span class="n">seconds</span> <span class="n">ago</span>    <span class="n">Up</span> <span class="mi">4</span> <span class="n">seconds</span>                                                <span class="n">friendly_merkle</span>
<span class="mi">0</span><span class="n">d0871c90313</span>   <span class="n">rocker</span><span class="o">/</span><span class="n">rstudio</span><span class="p">:</span><span class="mf">4.1.2</span>   <span class="s2">&quot;/init&quot;</span>   <span class="mi">33</span> <span class="n">minutes</span> <span class="n">ago</span>   <span class="n">Up</span> <span class="mi">33</span> <span class="n">minutes</span>   <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8787</span><span class="o">-&gt;</span><span class="mi">8787</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8787</span><span class="o">-&gt;</span><span class="mi">8787</span><span class="o">/</span><span class="n">tcp</span>   <span class="n">exciting_kepler</span>
</pre></div>
</div>
</div>
<div class="section" id="what-is-a-container-registry">
<h2>What is a container registry<a class="headerlink" href="#what-is-a-container-registry" title="Permalink to this headline">¶</a></h2>
<p>A container registry Is a remote repository used to share container images. This is similar to remote version control repositories for sharing code. Instead of code however, it is container images that are pushed and pulled to/from there. There are many container registries that can be used, but for this course we will focus on the widely-used DockerHub container registry: <a class="reference external" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<div class="section" id="demonstration">
<h3>Demonstration<a class="headerlink" href="#demonstration" title="Permalink to this headline">¶</a></h3>
<p>Let’s visit the repositories for the two container images that we used in the exercise earlier in class:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://hub.docker.com/r/rocker/r-base">rocker/r-base</a></p></li>
<li><p><a class="reference external" href="https://hub.docker.com/r/rocker/rstudio">rocker/rstudio</a></p></li>
</ul>
<p>Question: how did we get the images for the exercise earlier in class? We were just prompted to type <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run...</span></code></p>
<p>Answer: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">...</span></code> will first look for images you have locally, and run those if they exist. If they do not exist, it then attempts to pull the image from DockerHub.</p>
</div>
</div>
<div class="section" id="how-do-we-specify-a-container-image">
<h2>How do we specify a container image?<a class="headerlink" href="#how-do-we-specify-a-container-image" title="Permalink to this headline">¶</a></h2>
<p>Container images are specified from plain text files! In the case of the Docker containerization software, we call these <code class="docutils literal notranslate"><span class="pre">Dockerfiles</span></code>. We will explain these in more detail later, however for now it is useful to look at one to get a general idea of their structure:</p>
<p>Example <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">continuumio</span><span class="o">/</span><span class="n">miniconda3</span>

<span class="c1"># Install Jupyter, JupterLab, R &amp; the IRkernel</span>
<span class="n">RUN</span> <span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="o">--</span><span class="n">quiet</span> \
    <span class="n">jupyter</span> \
    <span class="n">jupyterlab</span><span class="o">=</span><span class="mf">3.</span><span class="o">*</span> \
    <span class="n">r</span><span class="o">-</span><span class="n">base</span><span class="o">=</span><span class="mf">4.1</span><span class="o">.*</span> \
    <span class="n">r</span><span class="o">-</span><span class="n">irkernel</span>

<span class="c1"># Install JupyterLab Git Extension</span>
<span class="n">RUN</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">jupyterlab</span><span class="o">-</span><span class="n">git</span>

<span class="c1"># Create working directory for mounting volumes</span>
<span class="n">RUN</span> <span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">notebooks</span>

<span class="c1"># Make port 8888 available for JupyterLab</span>
<span class="n">EXPOSE</span> <span class="mi">8888</span>

<span class="c1"># Install Git, the nano-tiny text editor and less (needed for R help)</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">--</span><span class="n">yes</span> <span class="o">&amp;&amp;</span> \
    <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">--</span><span class="n">yes</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">install</span><span class="o">-</span><span class="n">recommends</span> \
    <span class="n">git</span>
    <span class="c1">#nano-tiny \</span>
    <span class="c1">#less</span>

<span class="c1"># Copy JupyterLab start-up script into container</span>
<span class="n">COPY</span> <span class="n">start</span><span class="o">-</span><span class="n">notebook</span><span class="o">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span>

<span class="c1"># Change permission of startup script and execute it</span>
<span class="n">RUN</span> <span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">start</span><span class="o">-</span><span class="n">notebook</span><span class="o">.</span><span class="n">sh</span>
<span class="n">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&quot;/usr/local/bin/start-notebook.sh&quot;</span><span class="p">]</span>

<span class="c1"># Switch to staring in directory where volumes will be mounted</span>
<span class="n">WORKDIR</span> <span class="s2">&quot;/opt/notebooks&quot;</span>
</pre></div>
</div>
<p>The commands in all capitals are Docker commands. <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>s typically start with a <code class="docutils literal notranslate"><span class="pre">FROM</span></code> command that specifies which base image the new image should be built off. Docker images are built in layers - this helps make them more light-weight. The <code class="docutils literal notranslate"><span class="pre">FROM</span></code> command is usually followed by <code class="docutils literal notranslate"><span class="pre">RUN</span></code> commands that usually install new software, or execute configuration commands. Other commands in this example copy in needed configuration files, expose ports, specify the working directory, and specify programs to execute at start-up.</p>
<div class="section" id="demonstration-of-container-images-being-built-from-layers">
<h3>Demonstration of container images being built from layers<a class="headerlink" href="#demonstration-of-container-images-being-built-from-layers" title="Permalink to this headline">¶</a></h3>
<p>Let’s take a look at the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> for the <code class="docutils literal notranslate"><span class="pre">jupyter/docker-stacks</span></code> <code class="docutils literal notranslate"><span class="pre">r-notebook</span></code> container image:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/jupyter/docker-stacks/blob/master/r-notebook/Dockerfile">Dockerfile</a></p></li>
</ul>
<p><em>Question: What images does it build off?</em></p>
</div>
</div>
<div class="section" id="running-containers">
<h2>Running containers<a class="headerlink" href="#running-containers" title="Permalink to this headline">¶</a></h2>
<p>Below we demonstrate how to run containers using the <a class="reference external" href="https://hub.docker.com/r/continuumio/miniconda3"><code class="docutils literal notranslate"><span class="pre">continuumio/miniconda3</span></code> image</a> as an example:</p>
<div class="section" id="step-1-launch-the-docker-app-for-osx-windows-only">
<h3>Step 1 - launch the Docker app (for OSX &amp; Windows only)<a class="headerlink" href="#step-1-launch-the-docker-app-for-osx-windows-only" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use launchpad/Finder/Start menu/etc to find and launch Docker</p></li>
</ul>
<blockquote>
<div><p>Note: Docker might already be running, if so great, but if its not, the commands below will not work. So it is always good to check!</p>
</div></blockquote>
</div>
<div class="section" id="step-2-get-container-image-from-dockerhub">
<h3>Step 2 - get container image from Dockerhub<a class="headerlink" href="#step-2-get-container-image-from-dockerhub" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>open the terminal</p></li>
<li><p>type: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">continuumio/miniconda3</span></code></p></li>
<li><p>verify that it successfully pulled by typing: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">images</span></code>, you should see something like:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REPOSITORY</span>                 <span class="n">TAG</span>       <span class="n">IMAGE</span> <span class="n">ID</span>       <span class="n">CREATED</span>         <span class="n">SIZE</span>
<span class="n">continuumio</span><span class="o">/</span><span class="n">miniconda3</span>     <span class="n">latest</span>    <span class="mi">4</span><span class="n">d529c886124</span>   <span class="mi">4</span> <span class="n">weeks</span> <span class="n">ago</span>     <span class="mi">399</span><span class="n">MB</span>
</pre></div>
</div>
<blockquote>
<div><p>Note: You can skip this step and just got onto <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">...</span></code> as that command will pull the image if you do not have it locally.</p>
</div></blockquote>
</div>
<div class="section" id="step-3-launch-a-container-from-the-image-and-poke-around">
<h3>Step 3 - launch a container from the image and poke around!<a class="headerlink" href="#step-3-launch-a-container-from-the-image-and-poke-around" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>type: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-it</span> <span class="pre">continuumio/miniconda3</span></code></p></li>
<li><p>If it worked, then your command line prompt should now look something like this:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ad0560c5b81a</span><span class="p">:</span><span class="o">/</span><span class="c1"># </span>
</pre></div>
</div>
<ul class="simple">
<li><p>use <code class="docutils literal notranslate"><span class="pre">ls</span></code>, <code class="docutils literal notranslate"><span class="pre">cd</span></code>, <code class="docutils literal notranslate"><span class="pre">pwd</span></code> and explore the container</p></li>
<li><p>type <code class="docutils literal notranslate"><span class="pre">exit</span></code> to leave when you are done (your prompt will look normal again)!</p></li>
</ul>
</div>
<div class="section" id="step-4-clean-up-your-container">
<h3>Step 4 - clean up your container!<a class="headerlink" href="#step-4-clean-up-your-container" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>After you close a container it still “hangs” around…</p></li>
<li><p>View any existing containers using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code></p></li>
<li><p>Remove the container by typing <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span> <span class="pre">&lt;container_id&gt;</span></code></p></li>
<li><p>Prove to yourself that the container is no longer “hanging around” via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code>, but that you still have the image installed (via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">images</span></code>)</p></li>
</ul>
<blockquote>
<div><p>Note: to remove running containers, you will need to first stop them via <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">stop</span> <span class="pre">&lt;container_id&gt;</span></code></p>
</div></blockquote>
</div>
<div class="section" id="that-s-a-lot-of-work">
<h3>That’s a lot of work…<a class="headerlink" href="#that-s-a-lot-of-work" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>We can tell Docker to delete the container upon exit using the <code class="docutils literal notranslate"><span class="pre">--rm</span></code> flag in the run command.</p></li>
<li><p>Type the command below to run the container again, exit it and prove to yourself that the container was deleted (but not the image!):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="o">--</span><span class="n">rm</span> <span class="n">continuumio</span><span class="o">/</span><span class="n">miniconda3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="mounting-volumes-to-containers">
<h2>Mounting volumes to containers<a class="headerlink" href="#mounting-volumes-to-containers" title="Permalink to this headline">¶</a></h2>
<p>Often times we want to use the software made available to us in containers on files on our computers.
To do this, we need to explicitly tell Docker to mount a volume to the container.
We can do this via: <code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">&lt;path_to_computer_directory&gt;:&lt;absolute_path_to_container_directory&gt;</span></code></p>
<p>Often, we want to mount the volume from our current directory (where we are working) and we can do that with a short-form of <code class="docutils literal notranslate"><span class="pre">/$(pwd)</span></code> in place of the path to our computer’s directory.</p>
<p>To mount our current directory to a container from the <code class="docutils literal notranslate"><span class="pre">continuumio/miniconda3</span></code> image we type the following on your laptop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it --rm -v /$(pwd):/home/my_mounted_volume continuumio/miniconda3
</pre></div>
</div>
<p>Navigate to the directory where you mounted your files via: <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">/home/my_mounted_volume</span></code> and type <code class="docutils literal notranslate"><span class="pre">ls</span></code> to ensure you can see them.</p>
<blockquote>
<div><p>Note: if you are mounting volumes to a container from a Docker image that runs a web app, be sure to read the documentation to see where you should mount that volume. Usually the web apps are only exposed to certain directories and you will only be able to access the files in the mounted volume if you mount them to the correct place. For example, in the <code class="docutils literal notranslate"><span class="pre">rocker/rstudio</span></code> image that we loaded earlier, volumes need to be mounted within <code class="docutils literal notranslate"><span class="pre">/home/rstudio/</span></code> to be able to access them via the RStudio server web app.</p>
</div></blockquote>
<div class="section" id="windows-notes-for-mounting-volumes">
<h3>Windows notes for mounting volumes:<a class="headerlink" href="#windows-notes-for-mounting-volumes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Windows machines need to explicitly share drives with Docker - this should be part of your computer setup!</p></li>
<li><p>On Windows, the laptop path depends what shell you are using, here are some details:</p>
<ul>
<li><p>If you are going to run it in Windows terminal, then the command should be: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">--rm</span> <span class="pre">-it</span> <span class="pre">-v</span> <span class="pre">/$(pwd):&lt;PATH_ON_CONTAINER&gt;</span> <span class="pre">&lt;IMAGE_NAME&gt;</span></code> to share the current directory.</p></li>
<li><p>If you are going to run it in Power Shell, then the command should be: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">--rm</span> <span class="pre">-it</span> <span class="pre">-v</span> <span class="pre">&lt;ABSOLUTE_PATH_TO_CONTAINER&gt;:&lt;PATH_ON_CONTAINER&gt;</span> <span class="pre">&lt;IMAGE_NAME&gt;</span></code> (<code class="docutils literal notranslate"><span class="pre">pwd</span></code> and variants do not seem to work). And the path must be formatted like: <code class="docutils literal notranslate"><span class="pre">C:\Users\tiffany.timbers\Documents\project\:/home/project</span></code></p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="docker-commands">
<h2>Docker commands<a class="headerlink" href="#docker-commands" title="Permalink to this headline">¶</a></h2>
<p>Let’s now dig deeper into the commands and tools we just used to become more familiar with Docker! Let’s fill in this table to explain what each part of our Docker commands did:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>command/flag</p></th>
<th class="head"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pull</span></code></p></td>
<td><p>Downloads a Docker image from Docker Hub</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">images</span></code></p></td>
<td><p>Tells you what images are installed on your machine</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">run</span></code></p></td>
<td><p>Launches a Docker container from an image</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-it</span></code></p></td>
<td><p>Tells Docker to run the container interactively</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--rm</span></code></p></td>
<td><p>Makes a container ephemeral (deletes it upon exit)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-v</span></code></p></td>
<td><p>Mounts a volume of your laptop to the Docker container</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-p</span></code></p></td>
<td><p>Specifies the ports to map a web app to</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exit</span></code></p></td>
<td><p>Exits a Docker container</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="where-to-next">
<h2>Where to next?<a class="headerlink" href="#where-to-next" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Installing things in linux (most containers used in Data Science are linux based)</p></li>
<li><p>Creating your own Docker image!</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./materials/lectures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="04-virtual-environments.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Virtual environments</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Tiffany Timbers<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>